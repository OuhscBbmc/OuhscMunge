<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Upload to a SQL Server database using odbc — upload_sqls_odbc • OuhscMunge</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Upload to a SQL Server database using odbc — upload_sqls_odbc"><meta property="og:description" content="The function performs some extra configuration to improve robustness."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">OuhscMunge</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0.9016</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/OuhscBbmc/OuhscMunge/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Upload to a SQL Server database using odbc</h1>
    <small class="dont-index">Source: <a href="https://github.com/OuhscBbmc/OuhscMunge/blob/HEAD/R/upload-sqls-odbc.R" class="external-link"><code>R/upload-sqls-odbc.R</code></a></small>
    <div class="hidden name"><code>upload_sqls_odbc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function performs some extra configuration to improve robustness.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">upload_sqls_odbc</span><span class="op">(</span></span>
<span>  <span class="va">d</span>,</span>
<span>  <span class="va">schema_name</span>,</span>
<span>  <span class="va">table_name</span>,</span>
<span>  <span class="va">dsn_name</span>,</span>
<span>  clear_table <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  create_table <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  convert_logical_to_integer <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  timezone <span class="op">=</span> <span class="st">"UTC"</span>,</span>
<span>  timezone_out <span class="op">=</span> <span class="st">"UTC"</span>,</span>
<span>  transaction <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose_detail <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>d</dt>
<dd><p>Dataset to be uploaded to the dataset.  The object must inherit from <code>data.frame</code>.</p></dd>


<dt>schema_name</dt>
<dd><p>Name of the database destination table.</p></dd>


<dt>table_name</dt>
<dd><p>Name of the database destination table.</p></dd>


<dt>dsn_name</dt>
<dd><p>Name of the locally-defined DSN passed to <code><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">DBI::dbConnect()</a></code>.</p></dd>


<dt>clear_table</dt>
<dd><p>If <code>TRUE</code>, calls deletes or truncates all records before writing to the table.</p></dd>


<dt>create_table</dt>
<dd><p>If the table structure has not yet been defined in the database, it will be created if <code>create_table</code> is <code>TRUE</code>.</p></dd>


<dt>convert_logical_to_integer</dt>
<dd><p>Convert all <code>logical</code> columns to <code>integer</code>.  This helps the database store the values as bits.</p></dd>


<dt>timezone</dt>
<dd><p>The server time zone.  Passed to <code><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">DBI::dbConnect()</a></code>.</p></dd>


<dt>timezone_out</dt>
<dd><p>The time zone returned to R. Passed to <code><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">DBI::dbConnect()</a></code>.  See https://www.tidyverse.org/blog/2019/12/odbc-1-2-0/.</p></dd>


<dt>transaction</dt>
<dd><p>Should the clear and upload steps be wrapped in a rollback transaction?</p></dd>


<dt>verbose</dt>
<dd><p>Display messages about the status of an upload.</p></dd>


<dt>verbose_detail</dt>
<dd><p>Display a message about the connection's low-level details.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A boolean value that was returned by <code><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">DBI::dbWriteTable()</a></code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>If <code>transaction</code> is <code>TRUE</code> and the upload fails, the table is rolled back to the state before function was called.
This includes rolling back the (optional) clearing of records, and uploading the new records.
Decide if it's more robust to rollback to the previous state, or if it's better to leave the table in the incomplete state.
The latter is helpful diagnosing which record caused the write to fail; look at the last successful record contained in the database</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"OuhscMunge"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">OuhscMunge</span><span class="fu">::</span><span class="fu">upload_sqls_odbc</span><span class="op">(</span></span></span>
<span class="r-in"><span>  d                          <span class="op">=</span> <span class="va">ds_client</span>,          <span class="co"># Some data.frame that exists in RAM</span></span></span>
<span class="r-in"><span>  schema_name                <span class="op">=</span> <span class="st">"dbo"</span>,</span></span>
<span class="r-in"><span>  table_name                 <span class="op">=</span> <span class="st">"tbl_client"</span>,</span></span>
<span class="r-in"><span>  dsn_name                   <span class="op">=</span> <span class="st">"miechv_eval"</span>,</span></span>
<span class="r-in"><span>  create_table               <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  clear_table                <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  transaction                <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  verbose                    <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  convert_logical_to_integer <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  timezone                   <span class="op">=</span> <span class="st">"America/Chicago"</span>,</span></span>
<span class="r-in"><span>  timezone_out               <span class="op">=</span> <span class="st">"America/Chicago"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Will Beasley.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

